from typing import Union


def get_option(options: Union[list, dict]):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –∏–∑ –∑–∞–¥–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π"""
    instruction = '–í—ã–±–µ—Ä–∏—Ç–µ: '
    for i in range(len(options) - 1):
        instruction += '{}/'
    instruction += '{}\n'

    option = ''
    while option not in options:
        option = input(instruction.format(*options))
    return option


def step3_sober_and_sad():
    """–ö–æ–Ω–µ—Ü –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É —É—Ç–∫–∏ –Ω–µ –±—ã–ª–æ –∑–æ–Ω—Ç–∏–∫–∞"""
    print('–£—Ç–∫–∞ –≥—Ä—É—Å—Ç–∏—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –≤—ã–Ω—É–∂–¥–µ–Ω–∞ –±—ã–ª–∞ —É–π—Ç–∏ –∏–∑ –±–∞—Ä–∞.',
          '–¢—è–∂–µ–ª–æ –∏ –≥—Ä—É—Å—Ç–Ω–æ –Ω–µ –∏–º–µ—Ç—å –≤—ã–±–æ—Ä–∞')


def step3_drunk_and_happy():
    """–ö–æ–Ω–µ—Ü –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É—Ç–∫–∞ –ø—Ä–æ–ø–∏–ª–∞ —Å–≤–æ–π –∑–æ–Ω—Ç–∏–∫"""
    print('–£—Ç–∫–∞ –≤—ã–ø–∏–ª–∞ –µ—â–µ –±–æ–∫–∞–ª—å—á–∏–∫ –∞–ø–µ—Ä–æ–ª—è –∏ –ø–æ–ª—É—á–∏–ª–æ —Ç–æ —Å–∞–º–æ–µ —á—É–≤—Å—Ç–≤–æ',
          '–ª–µ–≥–∫–æ–≥–æ –æ–ø—å—è–Ω–µ–Ω–∏—è. –ü–æ—Å—á–∏—Ç–∞–ª–∞, —á—Ç–æ –¥–≤–∞ –±–æ–∫–∞–ª–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏',
          '–ø–æ—à–ª–∞ –≥—É–ª—è—Ç—å –ø–æ –≥–æ—Ä–æ–¥—É')


def step3_sober_and_happy():
    """–ö–æ–Ω–µ—Ü –∏—Å—Ç–æ—Ä–∏–∏, –∫–æ–≥–¥–∞ —É—Ç–∫–∞ –≤–æ–≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞ –∑–æ–Ω—Ç"""
    print('–£—Ç–∫–∞ —Ä–µ—à–∏–ª–∞, —á—Ç–æ –∑–æ–Ω—Ç –æ–Ω–∞ –æ—Å—Ç–∞–≤–ª—è—Ç—å –Ω–µ —Ö–æ—á–µ—Ç,',
          '–ø–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ç–∞–ª–∞ –ø–∏—Ç—å –µ—â–µ –±–æ–∫–∞–ª.',
          '–ù–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –≤—ã—à–ª–∞ –≤ —Ö–æ—Ä–æ—à–µ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –¥—É—Ö–∞.',
          '–•–æ—Ä–æ—à–æ –∏–º–µ—Ç—å –≤—ã–±–æ—Ä.')


def step2_common():
    """–£—Ç–∫–∞ –≤ –±–∞—Ä–µ, –Ω–∞—á–∞–ª–æ —ç—Ç–æ–π —á–∞—Å—Ç–∏"""
    print('–ë–∞—Ä–±—ë—Ä–¥ —Å–ø—Ä–æ—Å–∏–ª —É —É—Ç–∫–∏: "–°–æ–∫ –∏–ª–∏ –∞–ø–µ—Ä–æ–ª—å?"')
    options = ['—Å–æ–∫', '–∞–ø–µ—Ä–æ–ª—å']
    option = get_option(options)
    if option == '—Å–æ–∫':
        print('–ë–∞—Ä–±—ë—Ä–¥: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —ç—Ç–æ –∞–ø–µ—Ä–æ–ª—å".')
    print('–ë–∞—Ä–±—ë—Ä–¥ –Ω–∞–ª–∏–ª —É—Ç–∫–µ –±–æ–∫–∞–ª –∞–ø–µ—Ä–æ–ª—è.',
          '–£—Ç–∫–∞ –∑–∞–ø–ª–∞—Ç–∏–ª–∞ –∏ –ø–æ–Ω—è–ª–∞, —á—Ç–æ –¥–µ–Ω–µ–≥ –±–æ–ª—å—à–µ –Ω–µ—Ç.')
    print('–ë–∞—Ä–±—ë—Ä–¥ —Å–ø—Ä–æ—Å–∏–ª, –±—É–¥–µ—Ç –ª–∏ —É—Ç–∫–∞ –µ—â–µ —á—Ç–æ-–Ω–∏–±—É–¥—å')


def step2_no_umbrella():
    """—É—Ç–∫–∞ –±–µ–∑ –∑–æ–Ω—Ç–∞ –≤ –±–∞—Ä–µ"""
    step2_common()
    print('–£—Ç–∫–∞ –ø–æ–Ω—è–ª–∞, —á—Ç–æ –¥–µ–Ω–µ–≥ –Ω–µ—Ç –∏ –≤—ã–ø–∏—Ç—å –µ—â–µ –±–æ–∫–∞–ª –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è')
    options = {'–Ω–µ—Ç': False}
    _ = get_option(options)
    return step3_sober_and_sad()


def step2_umbrella():
    """—É—Ç–∫–∞ —Å –∑–æ–Ω—Ç–æ–º –≤ –±–∞—Ä–µ"""
    step2_common()
    print('–£—Ç–∫–∞ –ø–æ–Ω—è–ª–∞, —á—Ç–æ –Ω–µ —Å–º–æ—Ç—Ä—è –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ–Ω–µ–≥,',
          '–º–æ–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –∫–æ–∫—Ç–µ–π–ª—å, –æ—Å—Ç–∞–≤–∏–≤ –±–∞—Ä–±—ë—Ä–¥—É –∑–æ–Ω—Ç')
    options = {'–Ω–µ—Ç': False, '–ø–æ–≤—Ç–æ—Ä–∏—Ç—å': True}
    option = get_option(options)
    if options[option]:
        return step3_drunk_and_happy()
    step3_sober_and_happy()


def step1():
    """–ù–∞—á–∞–ª–æ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ —É—Ç–∫—É. –ï—Å—Ç—å –∑–æ–Ω—Ç –∏–ª–∏ –Ω–µ—Ç."""
    print('–£—Ç–∫–∞-–º–∞–ª—è—Ä ü¶Ü —Ä–µ—à–∏–ª–∞ –≤—ã–ø–∏—Ç—å –∑–∞–π—Ç–∏ –≤ –±–∞—Ä. \n–í–∑—è—Ç—å –µ–π –∑–æ–Ω—Ç–∏–∫? ‚òÇÔ∏è')
    options = {'–¥–∞': True, '–Ω–µ—Ç': False}
    option = get_option(options)
    if options[option]:
        return step2_umbrella()
    else:
        return step2_no_umbrella()


if __name__ == '__main__':
    step1()
